<div class="students-container">
  <div class="table-responsive">
    <table mat-table [dataSource]="studentsDataSource" matSort class="styled-table">
      
      <!-- Coluna: Avatar -->
      <ng-container matColumnDef="avatar">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let student">
          <img [src]="student.avatar" alt="{{ student.name }}" class="student-avatar"/>
        </td>
      </ng-container>

      <!-- Coluna: Nome Completo -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nome Completo</th>
        <td mat-cell *matCellDef="let student">{{ student.name }}</td>
      </ng-container>

      <!-- Coluna: Treinamentos -->
      <ng-container matColumnDef="completedTrainings">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Treinamentos</th>
        <td mat-cell *matCellDef="let student">{{ student.completedTrainings }}</td>
      </ng-container>

      <!-- Coluna: Média (Barra de Progresso) -->
      <ng-container matColumnDef="averageGrade">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Média</th>
        <td mat-cell *matCellDef="let student">
          <div class="progress-bar-container">
            <div 
              class="progress-bar" 
              [ngStyle]="{ width: (student.averageGrade / 10 * 100) + '%' }"
              [ngClass]="getBarColor(student.averageGrade)"
            >
              <span class="progress-text">{{ student.averageGrade | number: '1.1-1' }}</span>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Coluna: Turma -->
      <ng-container matColumnDef="class">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Turma</th>
        <td mat-cell *matCellDef="let student">{{ student.class }}</td>
      </ng-container>

      <!-- Coluna: Prioritário (com cor) -->
      <ng-container matColumnDef="priority">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Prioritário</th>
        <td mat-cell *matCellDef="let student">
          <span class="circle priority">
            {{ student.priority }}
          </span>
        </td>
      </ng-container>

      <!-- Coluna: Progredindo (com cor) -->
      <ng-container matColumnDef="progressing">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Progredindo</th>
        <td mat-cell *matCellDef="let student">
          <span class="circle progressing">{{ student.progressing }}</span>
        </td>
      </ng-container>

      <!-- Coluna: Dominando (com cor) -->
      <ng-container matColumnDef="mastering">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Dominando</th>
        <td mat-cell *matCellDef="let student">
          <span class="circle mastering">{{ student.mastering }}</span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
</div>
